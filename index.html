<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Orden de Trabajo - Fueltek</title>
  <link rel="stylesheet" href="styles.css" />

  <!-- SheetJS para exportar a Excel -->
  <script src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
  <div class="wrapper">
    <header>
      <!-- Pon tu logo aquí (ver instrucciones abajo) -->
      <img src="logo-fueltek.png" alt="Fueltek Logo" class="logo" />
      <div class="header-info">
        <h1>FUELTEK</h1>
        <p>Servicio Técnico Multimarca</p>
        <small>Teléfono: +56 9 4043 5805 | Dirección: La Trilla 1062, San Bernardo</small>
      </div>
    </header>

    <main>
      <div class="ot-bar">
        <div class="ot-num">
          <label>N° OT:</label>
          <input id="otNumber" readonly />
        </div>
        <div class="buttons">
          <button id="newOtBtn" title="Asignar nuevo OT"><i data-lucide="plus"></i> Nuevo OT</button>
          <button id="saveBtn" title="Guardar orden"><i data-lucide="save"></i> Guardar</button>
          <button id="exportBtn" title="Exportar todas las órdenes a Excel"><i data-lucide="download"></i> Excel</button>
          <button id="printBtn" title="Imprimir / Exportar a PDF"><i data-lucide="printer"></i> Imprimir / PDF</button>
          <button id="exportDbBtn" title="Exportar DB a JSON"><i data-lucide="file-text"></i> Exportar DB</button>
          <label class="import-label" title="Importar DB JSON">
            <i data-lucide="upload"></i> Importar DB
            <input id="importFile" type="file" accept=".json" />
          </label>
          <button id="clearBtn" class="danger" title="Borrar todo"><i data-lucide="trash-2"></i> Borrar</button>
        </div>
      </div>

      <form id="otForm" autocomplete="off">
        <fieldset>
          <legend>Datos del Cliente</legend>
          <div class="grid">
            <label class="stack">Nombre del Cliente:
              <input name="clienteNombre" />
            </label>
            <label class="stack">Teléfono:
              <input name="clienteTelefono" />
            </label>
            <label class="stack">Correo Electrónico:
              <input name="clienteEmail" type="email" />
            </label>
            <label class="stack">Fecha Recibida:
              <input name="fechaRecibida" type="date" />
            </label>
            <label class="stack">Fecha de Entrega:
              <input name="fechaEntrega" type="date" />
            </label>
          </div>
        </fieldset>

        <fieldset>
          <legend>Datos de la Herramienta</legend>
          <div class="grid">
            <label class="stack">Marca:
              <input name="marca" />
            </label>
            <label class="stack">Modelo:
              <input name="modelo" />
            </label>
            <label class="stack">N° de Serie:
              <input name="serie" />
            </label>
            <label class="stack">Año Fabricación:
              <input name="anio" type="number" min="1900" max="2100" />
            </label>
          </div>
        </fieldset>

        <fieldset>
          <legend>Revisión y Accesorios Recibidos</legend>
          <div class="checkbox-grid">
            <!-- Cada item usa .checkbox-item: checkbox a la izquierda y texto a la derecha -->
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Motosierra"> <span>Motosierra</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Desbrozadora"> <span>Desbrozadora</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Cortasetos"> <span>Cortasetos</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Corta Césped"> <span>Corta Césped</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Fumigadora"> <span>Fumigadora</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Sopladora"> <span>Sopladora</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Espada"> <span>Espada</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Cadena"> <span>Cadena</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Pistón Rayado"> <span>Pistón Rayado</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Cilindro Rayado"> <span>Cilindro Rayado</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Bujía"> <span>Bujía</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Funda Espada"> <span>Funda Espada</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Tapa de Arranque"> <span>Tapa de Arranque</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Brazo Completo"> <span>Brazo Completo</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Cabezal"> <span>Cabezal</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Tubo"> <span>Tubo</span></label>
            <label class="checkbox-item"><input type="checkbox" name="accesorios" value="Manilla Arranque"> <span>Manilla Arranque</span></label>
          </div>
        </fieldset>

        <fieldset>
          <legend>Diagnóstico Inicial</legend>
          <textarea name="diagnostico" rows="4"></textarea>
        </fieldset>

        <fieldset>
          <legend>Trabajo Realizado / Notas del Técnico</legend>
          <textarea name="trabajo" rows="4"></textarea>
        </fieldset>

        <fieldset>
          <legend>Pago</legend>
          <div class="grid-pay">
            <label class="stack">Valor del trabajo (CLP):
              <input name="valorTrabajo" type="number" min="0" step="1" />
            </label>
            <label class="stack">Estado de Pago:
              <select name="estadoPago" id="estadoPago">
                <option value="Pendiente">Pendiente de Pago</option>
                <option value="Pagado">Pagado</option>
                <option value="Abonado">Abonado</option>
              </select>
            </label>
            <label class="stack hidden" id="labelAbono">Monto abonado (CLP):
              <input name="montoAbonado" id="montoAbonado" type="number" min="0" step="1" />
            </label>
          </div>
        </fieldset>

        <div class="firmas">
          <div class="firma-box">
            <label>Firma Taller:</label>
            <input name="firmaTaller" />
          </div>
          <div class="firma-box">
            <label>Firma Cliente:</label>
            <input name="firmaCliente" />
          </div>
        </div>

        <section class="notas">
          <h4>Notas Importantes</h4>
          <ul>
            <li>Toda herramienta no retirada en 30 días podrá generar cobro por almacenamiento.</li>
            <li>FuelTek no se responsabiliza por accesorios no declarados al momento de la recepción.</li>
            <li>El cliente declara estar informado sobre los términos del servicio y autoriza la revisión del equipo.</li>
          </ul>
        </section>
      </form>
    </main>

    <footer>
      <p>© 2025 FUELTEK - Todos los derechos reservados</p>
    </footer>
  </div>

  <!-- Área para impresión: se llena dinámicamente antes de llamar a window.print() -->
  <div id="printArea" class="print-area" aria-hidden="true" style="display:none"></div>

  <script src="script.js"></script>
  <script>lucide.createIcons();</script>
</body>
</html>
